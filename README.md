# gagaFamily
版权所有 (c) 2025, 嘎嘎群集体成员保留所有权利。
版权所有 (c) 2025, gaga.org保留所有权利。

嘎嘎群始于2023年，由以下成员组成：柯镇恶、方、47、逍遥、全姐、闪闪、小何、季、真心、letuplay。以上成员保留所有著作权（包括但不限于文字、图片、
音频、视频、图表、界面设计、版面框架、有关数据或电子文档等）均受中华人民共和国法律法规和相应的国际条约保护，嘎嘎群成员 享有上述知
识产权，但相关权利人依照法律规定应享有的权利除外。未免疑义，本条所指的"知识产权"是指任何及所有基于本软件产生的：（a）版权商标、
商号、域名、与商标和商号相关的商誉、设计和专利；与创新、技术诀窍、商业秘密、保密技术、非技术信息相关的权利；（b）人身权、掩模
作品权、署名权和发表权；以及（c）在本协议生效之前已存在或此后出现在世界任何地方的其他工业产权、专有权、与"知识产权"相关的权利，
以及上述权利的所有续期和延长，无论此类权利是否已在相关法域内的相关机构注册。

Copyright (c) 2025, gaga  All rights reserved.
Copyright (c) 2025, gaga.org  All rights reserved.

一个基于Go语言开发的多人游戏平台，支持英雄/用户配置可视化编辑、分组系统、奖励结算系统、移动端适配和美观交互。

## 项目简介

gagaFamily 是一个轻量级的 Web 游戏服务器，支持多人分组和卧底游戏玩法。项目采用 Go 语言开发，前端为纯 HTML+CSS+JS，**已全面适配移动端，界面美观，交互友好**。

## 主要功能

### 🎮 分组系统
- **随机分组**: 从预设的玩家列表中随机选择5人组成队伍
- **性别平衡**: 确保每组包含2名女性和3名男性玩家
- **美观展示**: 分组结果以美观弹窗卡片/表格方式展示，支持移动端一屏显示
- **幸运男孩**: 从男性玩家中随机选择一名幸运玩家

### 🎁 奖励结算系统 ⭐ 新增
- **10种奖励类型**: 涵盖游戏各个方面的表现评估
- **随机抽奖**: 每次点击随机显示其中一种奖励类型
- **美观弹窗**: 专业设计的奖励展示界面，支持动画效果
- **游戏相关**: 基于实际游戏数据的奖励机制

**奖励类型包括：**
- 🏆 败方评分最低
- 🎯 胜方评分最低  
- 🏰 推塔最多的选手
- ⭐ 胜方MVP
- 🛡️ 助攻少的辅助
- ⚔️ 人头最多的选手
- 🏹 输出少的射手
- 💔 射手死亡多一方的辅助
- 💰 中路经济低一方的打野
- 👥 参团率低的对抗路

### ⚙️ 配置管理系统
- **英雄配置**: 支持通过表单或YAML两种方式编辑英雄配置
- **用户配置**: 支持用户禁用英雄、权重英雄的分路-英雄下拉选择
- **可视化编辑**: 所有编辑、保存、取消操作均有美观的底部固定操作栏
- **移动端体验**: 编辑界面在手机端体验极佳

### 🕵️ 卧底游戏
- **位置分配**: 为每个玩家随机分配游戏位置（对抗路、打野、中路、发育路、游走）
- **卧底机制**: 随机指定一名玩家作为卧底
- **队伍管理**: 支持队伍号生成和重置功能
- **IP追踪**: 基于IP地址管理玩家状态

### 🎨 界面美观、交互友好
- **现代化设计**: 所有按钮、弹窗、表单、分组、编辑区等均已优化
- **渐变背景**: 主色渐变、圆角、阴影、动画效果
- **编辑/查看模式**: 切换有明显提示和图标（铅笔/放大镜），操作一目了然
- **全部中文界面**: 适合国内用户
- **移动端适配**: 所有页面、弹窗、表单、分组、按钮等在手机端均自适应

## 使用方式

1. 启动后端 Go 服务（见下方安装与运行）
2. 浏览器访问 `http://服务器IP:8008/gagaFamily/game`
3. **配置管理**: 点击"HERO"或"USER"按钮，进入配置编辑弹窗
4. **分组功能**: 点击"分组"按钮，分组结果以美观弹窗展示
5. **奖励结算**: 点击"奖励结算"按钮，随机显示一种奖励类型

## 技术栈

- **后端**: Go 1.20+
- **前端**: HTML5 + CSS3 + JavaScript
- **网络**: HTTP服务器
- **并发**: Go sync.Map用于线程安全的数据存储
- **响应式设计**: 全面支持移动端和桌面端

## 项目结构

```
gagaFamily/
├── main.go              # 主程序入口，HTTP服务器配置
├── gaga.html            # 前端界面（已适配移动端）
├── go.mod               # Go模块配置
├── gameplay/            # 游戏逻辑模块
│   ├── group.go         # 分组系统实现
│   └── undercover.go    # 卧底游戏实现
├── hero.yaml            # 英雄配置
├── user.yaml            # 用户配置
└── README.md           # 项目说明文档
```

## 安装和运行

### 环境要求
- Go 1.20 或更高版本

### 安装步骤

1. 克隆项目
```bash
git clone <repository-url>
cd gagaFamily
```

2. 安装依赖
```bash
go mod tidy
```

3. 运行项目
```bash
go run main.go
```

4. 访问应用
浏览器访问 `http://服务器IP:8008/gagaFamily/game`

## API接口

### 分组系统
- `GET /gagaFamily/group/getGroup` - 获取随机分组
- `GET /gagaFamily/group/getLuckyBoy` - 获取幸运男孩

### 配置管理
- `GET /gagaFamily/conf/heroYaml` - 获取英雄配置
- `GET /gagaFamily/conf/userYaml` - 获取用户配置
- `POST /gagaFamily/conf/heroEdit` - 编辑英雄配置
- `POST /gagaFamily/conf/userEdit` - 编辑用户配置

### 卧底游戏
- `GET /gagaFamily/undercoverGame/resetUndercover` - 重置游戏
- `GET /gagaFamily/undercoverGame/getUndercover` - 获取卧底身份

## 游戏规则

### 分组规则
- 每组5人，包含2名女性和3名男性
- 女性玩家：圈姐、真心、闪闪、47
- 男性玩家：柯镇恶、季富龙、方震、逍遥、小何、达芬奇

### 奖励结算规则
- 每次点击随机选择一种奖励类型
- 所有奖励均为"发9.9红包"
- 基于游戏表现数据（评分、推塔、人头、经济等）
- 涵盖所有游戏位置（射手、辅助、打野、对抗路、中路）

### 卧底游戏规则
- 5个游戏位置：对抗路、打野、中路、发育路、游走
- 随机指定一名玩家作为卧底
- 每个IP地址只能参与一次，避免重复抽取
- 支持队伍号管理，便于多组游戏

## 配置说明

### 服务器配置
- 默认端口：8008
- 支持跨域访问
- 静态文件服务

### 玩家配置
玩家列表可在 `gameplay/group.go` 中修改：
```go
var girlSlice = []string{"圈姐", "真心", "闪闪", "47"}
var boySlice = []string{"柯镇恶", "季富龙", "方震", "逍遥", "小何", "达芬奇"}
```

## 其他说明

- **所有界面均为中文**，适合国内用户
- **移动端全面适配**，单手操作无压力
- **支持通过前端可视化界面**进行所有常用配置，无需手动编辑YAML
- **奖励结算系统**增加了游戏的趣味性和团队协作意识

## 开发说明

### 添加新功能
1. 在 `gameplay/` 目录下创建新的游戏模块
2. 在 `main.go` 中注册新的HTTP路由
3. 更新前端界面以支持新功能

### 部署建议
- 使用反向代理（如Nginx）进行负载均衡
- 配置HTTPS以提高安全性
- 考虑使用数据库存储游戏状态（当前使用内存存储）

## 许可证

本项目采用开源许可证，具体许可证信息请查看项目根目录的LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进项目！

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 发送邮件至项目维护者

---

如有问题或建议，欢迎反馈！
